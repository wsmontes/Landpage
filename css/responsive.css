/* Responsive styles for the terminal portfolio */

/* Extra large screens */
@media screen and (min-width: 1600px) {
    .section-content {
        max-width: 1400px;
    }
    
    #projects .project-card {
        width: 70%;
    }
    
    .skill-bar .tui-progress-bar {
        max-width: 600px;
    }
}

/* Large screens */
@media screen and (min-width: 1200px) and (max-width: 1599px) {
    .section-content {
        max-width: 1100px;
    }
    
    #projects .project-card {
        width: 75%;
    }
    
    .skill-bar .tui-progress-bar {
        max-width: 500px;
    }
}

/* Medium screens */
@media screen and (min-width: 992px) and (max-width: 1199px) {
    .section-content {
        max-width: 900px;
    }
    
    #projects .project-card {
        width: 85%;
    }
    
    .skill-bar .tui-progress-bar {
        max-width: 400px;
    }
}

/* Small screens and tablets */
@media screen and (min-width: 768px) and (max-width: 991px) {
    .section-content {
        padding: 0 20px;
    }
    
    #projects .project-card {
        width: 90%;
    }
    
    .skill-bar {
        flex-wrap: wrap;
        flex-direction: column;
        gap: 10px;
    }
    
    .skill-bar span {
        min-width: 150px;
    }
    
    .skill-bar span.skill-name {
        min-width: 150px;
    }
    
    .tui-tab {
        padding: 5px 8px;
    }
    
    .skill-year-container {
        max-width: 100%;
    }
    
    .skill-info {
        flex: 0 0 auto;
        width: 100%;
    }
    
    .skill-files {
        width: 100%;
    }
}

/* Tablets and large phones */
@media screen and (min-width: 576px) and (max-width: 767px) {
    html, body {
        overflow: auto;
        height: auto; /* Reset height for mobile */
    }
    
    .fullscreen-container {
        height: auto;
        min-height: 100vh;
        overflow: visible; /* Add explicit visible */
    }
    
    .tui-window.full-width {
        height: auto;
        min-height: calc(100vh - 80px);
        margin-bottom: 40px;
    }
    
    .tui-fieldset {
        height: auto;
    }
    
    .content-area {
        height: auto;
        max-height: none;
        overflow-y: visible; /* Change from auto to visible */
        -webkit-overflow-scrolling: touch; /* Add for iOS scrolling */
    }
    
    .skill-bar {
        flex-direction: column;
        align-items: flex-start;
        margin-bottom: 16px; /* Reduced from 24px for more compact view */
        gap: 8px;
    }
    
    .skill-bar span {
        margin-bottom: 5px;
    }
    
    .skill-bar span.skill-name {
        margin-bottom: 3px;
    }
    
    .skill-year-container {
        width: 100%;
        max-width: 100%;
    }
    
    .skill-meter {
        gap: 5px;
    }
    
    #projects .project-card {
        width: 100%;
        margin-bottom: 32px; /* Increased from 16px to 32px for more spacing between cards on mobile */
    }
    
    #projects .tui-panel-content {
        min-height: auto;
        padding: 12px; /* Slightly reduced padding */
    }
    
    /* Two-row top navigation - 80s style */
    .tui-nav {
        flex-wrap: nowrap; /* Prevent wrapping to two lines */
        height: 30px; /* Fixed height */
        padding: 0 5px;
        justify-content: space-between;
    }
    
    .tui-nav ul {
        flex-wrap: nowrap; /* Keep menu items on one line */
        justify-content: center;
        order: 2;
        flex: 0 1 auto; /* Allow shrinking but not growing */
        overflow-x: auto; /* Allow horizontal scrolling if needed */
        scrollbar-width: none; /* Hide scrollbar in Firefox */
        -ms-overflow-style: none; /* Hide scrollbar in IE/Edge */
    }
    
    .tui-nav ul::-webkit-scrollbar {
        display: none; /* Hide scrollbar in Chrome/Safari */
    }
    
    .tui-datetime {
        margin-left: 0;
        order: 3;
        flex: 0 0 auto; /* Prevent shrinking */
    }
    
    .tui-sidenav-button {
        order: 1;
        margin-right: 5px !important;
        flex: 0 0 auto; /* Prevent shrinking */
    }
    
    /* In case we need to hide some menu items at this breakpoint */
    .tui-nav ul li:not(.tui-sidenav-button) {
        /* Only display first two menu items plus hamburger */
        display: inline-block;
    }
    
    /* Status bar adjustments */
    .tui-statusbar ul {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
    }
    
    .tui-statusbar-divider {
        display: none;
    }
    
    /* Simplified navbar */
    .tui-nav {
        flex-wrap: nowrap;
        height: 30px;
        padding: 0 10px;
    }
    
    .tui-datetime {
        font-size: 0.95em;
    }
    
    .tui-sidenav-button {
        font-size: 1.2em;
    }
    
    .skill-info {
        width: 100%;
        overflow: visible; /* Ensure no height restrictions */
    }
    
    .skill-files {
        width: 100%;
        margin-top: 5px;
        margin-bottom: 16px;
        /* Remove any height limitations */
        max-height: none;
        height: auto;
        overflow: visible; /* Explicitly set overflow to visible */
    }
    
    .skill-file {
        font-size: 0.85em;
    }
    
    .skill-file-size {
        display: inline-block;
        width: 100px;
    }
    
    .section-content {
        padding: 0 16px; /* Consistent padding */
    }
    
    .about-intro {
        flex-direction: column; /* Stack vertically on tablets */
        align-items: center;
        gap: 16px;
    }
    
    .about-photo-container {
        float: none; /* Remove float on tablets */
        margin-right: 0; /* Remove right margin */
        max-width: 250px;
        margin: 0 auto 16px auto; /* Center the photo */
    }
    
    .about-text {
        width: 100%;
        text-align: center;
    }
    
    .about-content {
        width: 100%;
        margin-top: 10px;
    }
    
    /* Center all paragraphs in about section */
    #about .about-content p {
        text-align: center;
    }
    
    /* Keep pre blocks left-aligned */
    #about .about-content pre,
    #about .about-content .yellow-168-text {
        text-align: left;
    }
}

/* Small phones */
@media screen and (max-width: 575px) {
    html, body {
        overflow: auto;
        height: auto; /* Reset height for mobile */
        -webkit-text-size-adjust: 100%; /* Prevent iOS font size adjustments */
        overflow-y: auto; /* Ensure scrolling works */
        -webkit-overflow-scrolling: touch; /* Enable smooth scrolling */
    }
    
    .fullscreen-container {
        height: auto;
        min-height: 100vh;
        overflow: visible;
    }
    
    .tui-window.full-width {
        position: relative; /* Ensure position context */
        height: auto;
        min-height: calc(100vh - 80px);
        margin-bottom: 40px;
    }
    
    .tui-fieldset {
        position: relative; /* Ensure position context */
        height: auto;
        padding: 5px;
        overflow: visible; /* Add explicit */
    }
    
    .content-area {
        height: auto;
        padding: 5px;
        overflow-y: visible; /* Change from auto to visible */
        -webkit-overflow-scrolling: touch; /* Ensure smooth scrolling on mobile */
        max-height: none;
        overflow-y: auto; /* Ensure scrolling works */
        -webkit-overflow-scrolling: touch; /* Enable smooth scrolling */
    }
    
    .section-content {
        padding: 0 12px; /* Slightly smaller padding */
    }
    
    /* Optimize skill bars for small screens with reduced spacing */
    .skill-bar {
        flex-direction: column;
        align-items: flex-start;
        margin-bottom: 12px; /* Reduced from 20px for tighter spacing */
        gap: 6px; /* Slightly reduced from 8px */
    }
    
    .skill-bar span {
        margin-bottom: 5px;
        margin-right: 0;
    }
    
    .skill-bar span.skill-name {
        margin-bottom: 3px;
        margin-right: 0;
    }
    
    .skill-year-container {
        width: 100%;
        max-width: 100%;
    }
    
    .skill-meter {
        flex-wrap: wrap;
        gap: 5px;
    }
    
    /* Project cards on small screens */
    #projects .project-card {
        width: 100%;
        margin-bottom: 32px; /* Increased from 16px to 32px for more spacing between cards on mobile */
    }
    
    #projects .tui-panel-content {
        min-height: 0;
        padding: 10px; /* Further reduced padding */
    }
    
    /* Tab navigation */
    .tui-tabs ul {
        display: flex;
        flex-wrap: wrap;
    }
    
    .tui-tabs ul li {
        flex: 1 1 auto;
    }
    
    .tui-tab {
        padding: 5px 2px;
        font-size: 0.9em;
        text-align: center;
    }
    
    /* Top navigation */
    .tui-nav {
        flex-wrap: nowrap; /* Prevent wrapping to two lines */
        height: 30px;
        min-height: 24px;
        padding: 0 5px;
        justify-content: space-between;
    }
    
    .tui-nav ul {
        flex: 0 1 auto; /* Allow shrinking but not growing */
        justify-content: center;
        width: auto; /* Not full width */
        order: 2;
    }
    
    .tui-datetime {
        margin-left: 0 !important;
        margin-right: 5px;
        font-size: 0.9em;
        order: 3;
        flex: 0 0 auto; /* Prevent shrinking */
    }
    
    .tui-sidenav-button {
        margin-left: 5px !important;
        margin-right: 5px !important;
        order: 1;
        flex: 0 0 auto; /* Prevent shrinking */
    }
    
    /* Contact section fixes */
    #contact .section-content {
        padding: 0 5px;
        max-width: 100%;
        box-sizing: border-box;
        overflow-x: hidden;
    }
    
    .contact-table {
        width: 100%;
        table-layout: fixed;
        box-sizing: border-box;
    }
    
    .contact-table td {
        word-wrap: break-word;
        overflow-wrap: break-word;
        padding: 5px;
    }
    
    .contact-table td:first-child {
        width: 30%;
    }
    
    /* Only show hamburger on very small screens, optimize space */
    @media (max-width: 400px) {
        .tui-nav ul li:not(.tui-sidenav-button) {
            display: none;
        }
        
        .tui-sidenav-button {
            display: inline-block !important;
        }
    }
    
    /* Hide redundant menu items on very small screens */
    @media (max-width: 400px) {
        .tui-nav ul li:not(.tui-sidenav-button) {
            display: none;
        }
        
        .tui-sidenav-button {
            display: inline-block !important;
        }
        
        .tui-nav {
            justify-content: space-between;
            padding: 2px 5px;
        }
        
        .tui-datetime {
            text-align: right;
        }
    }
    
    /* Status bar simplification */
    .tui-statusbar {
        height: auto;
    }
    
    .tui-statusbar ul {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        padding: 2px 0;
    }
    
    .tui-statusbar ul li {
        font-size: 0.85em;
        margin: 3px;
        padding: 3px;
    }
    
    .tui-statusbar-divider {
        display: none;
    }
    
    /* Better touch targets */
    .tui-button, .tui-sidenav ul li, .tui-statusbar ul li {
        padding: 8px 12px;
    }
    
    /* Simplified navbar for small screens */
    .tui-nav {
        flex-wrap: nowrap;
        height: 30px;
        min-height: 24px;
        padding: 0 8px;
    }
    
    .tui-datetime {
        font-size: 0.9em;
    }
    
    .tui-sidenav-button {
        font-size: 1.2em;
    }
    
    .skill-info {
        width: 100%;
        overflow: visible; /* Ensure no height restrictions */
    }
    
    .skill-files {
        width: 100%;
        margin-top: 5px;
        padding: 5px;
        margin-bottom: 12px;
        /* Remove any height limitations */
        max-height: none;
        height: auto;
        overflow: visible; /* Explicitly set overflow to visible */
    }
    
    .skill-file {
        font-size: 0.8em;
    }
    
    .skill-file-size {
        display: none; /* Hide file size on very small screens */
    }
    
    .skill-volume-info {
        font-size: 0.8em;
    }
    
    /* More compact vertical rhythm for tiny screens */
    h3, h4 {
        margin-bottom: 12px; /* Reduced from 16px */
    }
    
    .tui-divider {
        margin-bottom: 16px; /* Reduced from 24px */
        margin-top: 8px;
    }
    
    /* Contact section compact spacing */
    #contact table {
        margin-top: 12px;
        margin-bottom: 16px;
    }
    
    #contact table td {
        padding: 6px 4px; /* Reduced padding */
    }
    
    /* Subskill content for small screens */
    .subskill-content {
        margin-left: 12px; /* Reduced from 20px */
        padding: 6px; /* Reduced from 8px */
        margin-bottom: 12px; /* Reduced from 16px */
    }
    
    /* Very small screens - enhance touch targets */
    @media (max-width: 340px) {
        .tui-nav {
            height: 35px;
        }
        
        .tui-sidenav-button {
            font-size: 1.3em;
        }
    }
    
    /* Further optimize contact table for very narrow screens */
    .contact-table td {
        padding: 5px 2px;
    }
    
    .contact-table td:first-child {
        width: 25%;
    }
    
    /* iOS-specific fixes for small screens */
    @supports (-webkit-touch-callout: none) {
        .skill-files, .subskill-content {
            /* Fix for iOS Safari */
            transform: translateZ(0); /* Force GPU acceleration */
        }
        
        .content-area {
            /* Fix content clipping on iOS */
            -webkit-transform: translate3d(0,0,0);
        }
    }
    
    .about-intro {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        margin-bottom: 16px;
    }
    
    .about-photo-container {
        float: none; /* Remove float on mobile */
        margin-right: 0; /* Remove right margin */
        max-width: 220px;
        margin: 0 auto 16px auto; /* Center the photo */
    }
    
    .about-text {
        width: 100%;
        text-align: center;
    }
    
    .about-content {
        width: 100%;
        text-align: left;
        margin-top: 8px;
    }
    
    /* Center all paragraphs in about section */
    #about .about-content p {
        text-align: center;
    }
    
    /* Keep pre blocks left-aligned */
    #about .about-content pre,
    #about .about-content .yellow-168-text {
        text-align: left;
    }
    
    /* Status bar optimization for mobile - F-key only with expand on hover */
    .tui-statusbar {
        height: 44px;
        padding: 0;
        display: flex;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 9;
        background-color: rgb(168, 168, 168);
    }
    
    .tui-statusbar ul {
        display: flex;
        width: 100%;
        padding: 0;
        margin: 0;
        justify-content: space-between;
    }
    
    .tui-statusbar ul li {
        flex: 1;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: flex 0.25s ease;
        overflow: hidden;
        padding: 0;
        margin: 0;
    }
    
    /* Show only F-keys by default */
    .tui-statusbar ul li a {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        white-space: nowrap;
    }
    
    /* Hide labels by default */
    .tui-statusbar ul li a span.red-168-text + * {
        position: absolute;
        left: -9999px;
        opacity: 0;
        transition: opacity 0.2s ease;
    }
    
    /* When hovering, expand the item and show the label */
    .tui-statusbar ul li:hover {
        flex: 3;
        z-index: 2;
    }
    
    .tui-statusbar ul li:hover a span.red-168-text + * {
        position: static;
        margin-left: 4px;
        opacity: 1;
    }
    
    /* Align items properly */
    .tui-statusbar .right-align-menu {
        position: relative;
        margin: 0;
        padding: 0;
    }
    
    /* Source code dropdown position */
    .tui-statusbar .source-code-dropdown .tui-dropdown-content {
        bottom: 100%;
        right: 0;
        left: auto;
        width: auto;
        min-width: 200px;
        max-width: 90vw;
        z-index: 999; /* Increased z-index to ensure it's on top */
        position: absolute; /* Ensure absolute positioning */
    }
    
    /* Ensure the dropdown container is positioned correctly */
    .tui-statusbar .source-code-dropdown {
        position: relative;
    }
    
    /* Mobile footer behavior - prevent direct link on first touch */
    .tui-statusbar ul li a {
        position: relative;
    }
    
    /* Apply for the F10 item specifically */
    .tui-statusbar .source-code-dropdown .tui-dropdown > a {
        pointer-events: none; /* Disable direct link on first touch */
    }
    
    /* Apply for the regular footer items */
    .tui-statusbar ul li a.touch-expanded {
        pointer-events: auto; /* Enable link on second touch */
    }
    
    /* Make sure the dropdown toggle works */
    .tui-statusbar .source-code-dropdown.touch-expanded .tui-dropdown > a {
        pointer-events: auto; /* Enable dropdown toggle on second touch */
    }
    
    /* Source code dropdown position */
    .tui-statusbar .source-code-dropdown .tui-dropdown-content {
        bottom: 100%;
        right: 0;
        left: auto;
        width: auto;
        min-width: 200px;
        max-width: 90vw;
        z-index: 1000; /* Increased z-index to ensure it's above everything */
        position: absolute; /* Ensure absolute positioning */
        background-color: #000080; /* Ensure background is opaque */
        border: 1px solid #00a8a8; /* Add visible border */
    }
    
    .content-area {
        height: auto;
        max-height: none;
        overflow-y: auto; /* Ensure scrolling works */
        -webkit-overflow-scrolling: touch; /* Enable smooth scrolling */
    }
}

/* Super tiny screens (under 350px) - extremely compact spacing */
@media screen and (max-width: 350px) {
    /* Minimal spacing for very small screens */
    .skill-bar {
        margin-bottom: 8px; /* Reduced from 16px for ultra-compact layout */
        gap: 4px;
    }
    
    /* Even tighter spacing between skill files and next skill */
    #skills .skill-files {
        margin-bottom: 8px;
    }
    
    h3, h4, h5, h6 {
        margin-bottom: 8px;
    }
    
    .tui-divider {
        margin-bottom: 12px;
        margin-top: 4px;
    }
    
    p, ul, ol {
        margin-bottom: 12px;
    }
    
    #projects .project-card {
        margin-bottom: 24px; /* Increased from 12px to 24px for tiny screens */
    }
    
    #projects .tui-panel-content {
        padding: 8px;
    }
    
    .subskill-content {
        margin-left: 8px;
        padding: 4px;
        margin-bottom: 8px;
    }
    
    .about-intro {
        margin-bottom: 12px;
    }
    
    .about-photo-container {
        max-width: 180px;
        margin: 12px auto;
    }
    
    .about-content {
        margin-top: 4px;
    }
}

/* Global styles for footer bar that apply at all screen sizes */
.tui-statusbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 40px;
    padding: 0 5px;
    background-color: rgb(168, 168, 168);
    position: relative; /* Ensure relative positioning for proper stacking context */
}

.tui-statusbar ul {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
}

.tui-statusbar ul li {
    margin: 0 5px;
    position: relative; /* Ensure relative positioning for dropdowns */
}

/* Add hover effect for all footer items including F10 */
.tui-statusbar ul li:hover,
.tui-statusbar .source-code-dropdown:hover {
    background-color: #00aa00; /* Green highlight on hover like other items */
}

/* Source code dropdown positioning for all screen sizes */
.source-code-dropdown {
    position: relative;
}

.source-code-dropdown .tui-dropdown-content {
    position: absolute;
    min-width: 240px;
    right: 0;
    left: auto;
    bottom: 44px; /* Position above the footer, previously was using bottom: 100% */
    z-index: 99999; /* Extremely high z-index to overcome any stacking issues */
    background-color: #000080;
    border: 1px solid #00a8a8;
    box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.5); /* Add shadow for better visibility */
}

/* Fix dropdown positioning and visibility */
.tui-dropdown-content {
    transform: translateY(0); /* Ensure no transform is affecting position */
    visibility: visible !important; /* Force visibility when shown */
    opacity: 1 !important; /* Force opacity when shown */
}

/* Ensure footer is properly positioned */
.tui-statusbar.fixed-bottom {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 10;
}

/* Right-aligned menu in status bar */
.tui-statusbar .right-align-menu {
    margin-left: auto;
    display: flex;
}

/* Ensure the F10 dropdown is clickable */
.tui-statusbar .source-code-dropdown .tui-dropdown > a {
    cursor: pointer;
    pointer-events: auto !important; /* Ensure clickability */
}

/* Fix for dropdown appearing behind content on mobile */
@media screen and (max-width: 575px) {
    .tui-statusbar .source-code-dropdown .tui-dropdown-content {
        bottom: 44px; /* Ensure consistent placement above the footer */
        position: fixed; /* Use fixed positioning on mobile for better stacking */
        z-index: 99999; /* Extremely high z-index */
    }
    
    /* Reset any conflicting mobile styles */
    .tui-statusbar ul li a.touch-expanded,
    .tui-statusbar .source-code-dropdown.touch-expanded .tui-dropdown > a {
        pointer-events: auto; /* Enable all interactions */
    }
}
